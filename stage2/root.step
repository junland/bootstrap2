#!/bin/true

set -e

. lib/env.sh
. lib/functions.sh
. targets/${STRAP_SELECTED_TARGET}.tgt

msg "Configuring root filesystem layout..."
	
install -v -D -d -m 00755 "${STRAP_STAGE2_INSTALL_DIR}"/usr/{bin,lib,share,sbin,include}
install -v -D -d -m 00755 "${STRAP_STAGE2_INSTALL_DIR}"/{etc,proc,run,var,sys,dev,tmp}

install -v -D -d -m 00755 "${STRAP_STAGE2_INSTALL_DIR}/run/lock"
ln -sv ../run/lock "${STRAP_STAGE2_INSTALL_DIR}/var/lock"

ln -sv lib "${STRAP_STAGE2_INSTALL_DIR}/usr/lib64"
ln -sv usr/bin "${STRAP_STAGE2_INSTALL_DIR}/bin"
ln -sv usr/sbin "${STRAP_STAGE2_INSTALL_DIR}/sbin"
ln -sv usr/lib "${STRAP_STAGE2_INSTALL_DIR}/lib"
ln -sv usr/lib64 "${STRAP_STAGE2_INSTALL_DIR}/lib64"